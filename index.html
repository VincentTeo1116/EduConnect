<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="Images/Logo.png" type="image/png">
  <style>
/* App.css */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.form-container {
  max-width: 400px;
  margin: 20px;
  padding: 30px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
  animation: fadeIn 0.6s ease-out;
  backdrop-filter: blur(10px);
}

.form-container h2 {
  text-align: center;
  margin-bottom: 25px;
  color: #333;
  font-weight: 600;
}

.form-container input {
  width: 100%;
  padding: 15px;
  margin: 10px 0;
  border: 2px solid #e1e5e9;
  border-radius: 10px;
  box-sizing: border-box;
  font-size: 16px;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.8);
}

.form-container input:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  outline: none;
  transform: translateY(-2px);
}

.form-container button {
  width: 100%;
  padding: 15px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  transition: all 0.3s ease;
  margin-top: 10px;
}

.form-container button:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
}

.form-container button:active {
  transform: translateY(-1px);
}

.form-container p {
  text-align: center;
  margin-top: 25px;
  color: #666;
}

.form-container p button {
  background: none;
  border: none;
  color: #667eea;
  cursor: pointer;
  text-decoration: underline;
  font-size: 14px;
  transition: color 0.3s ease;
}

.form-container p button:hover {
  color: #764ba2;
}

.main-container {
  max-width: 800px;
  margin: 20px;
  padding: 30px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
  animation: fadeIn 0.6s ease-out;
  backdrop-filter: blur(10px);
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 20px 30px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

header h1 {
  margin: 0;
  font-size: 24px;
}

header button {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: 2px solid rgba(255, 255, 255, 0.3);
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
}

header button:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

main {
  margin-top: 0;
}

section {
  background: rgba(255, 255, 255, 0.8);
  padding: 25px;
  margin-bottom: 25px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  transition: transform 0.3s ease;
}

section:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

section h2 {
  margin-top: 0;
  color: #333;
  font-size: 20px;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  padding: 12px 0;
  border-bottom: 1px solid #eee;
  transition: padding-left 0.3s ease;
}

li:hover {
  padding-left: 10px;
  background: rgba(102, 126, 234, 0.05);
}

.logo {
  width: 200px;
  height: auto;
  margin-right: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.logo:hover {
  transform: scale(1.05);
}

.form-container select, .form-container textarea {
  width: 100%;
  padding: 15px;
  margin: 10px 0;
  border: 2px solid #e1e5e9;
  border-radius: 10px;
  box-sizing: border-box;
  font-size: 16px;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.8);
}

.form-container select:focus, .form-container textarea:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  outline: none;
}
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
const LoginForm = ({ loginData, setLoginData, handleLogin, setPage }) => (
  <div className="form-container">
    <div style={{textAlign: 'center', marginBottom: '20px'}}>
      <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
    </div>
    <h2>Login to EduConnect</h2>
    <form onSubmit={handleLogin}>
      <input
        type="email"
        placeholder="Email"
        value={loginData.email}
        onChange={(e) => setLoginData({ ...loginData, email: e.target.value })}
        required
        autoComplete="off"
      />
      <input
        type="password"
        placeholder="Password"
        value={loginData.password}
        onChange={(e) => setLoginData({ ...loginData, password: e.target.value })}
        required
        autoComplete="off"
      />
      <button type="submit">Login</button>
    </form>
    <p>Don't have an account? <button onClick={() => setPage('register')}>Register</button></p>
  </div>
);

const RegisterForm = ({ registerData, setRegisterData, handleRegister, setPage }) => (
  <div className="form-container">
    <div style={{textAlign: 'center', marginBottom: '20px'}}>
      <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
    </div>
    <h2>Register for EduConnect</h2>
    <form onSubmit={handleRegister}>
      <input
        type="text"
        placeholder="Name"
        value={registerData.name}
        onChange={(e) => setRegisterData({ ...registerData, name: e.target.value })}
        required
        autoComplete="off"
      />
      <input
        type="email"
        placeholder="Email"
        value={registerData.email}
        onChange={(e) => setRegisterData({ ...registerData, email: e.target.value })}
        required
        autoComplete="off"
      />
      <input
        type="password"
        placeholder="Password"
        value={registerData.password}
        onChange={(e) => setRegisterData({ ...registerData, password: e.target.value })}
        required
        autoComplete="off"
      />
      <select
        value={registerData.role}
        onChange={(e) => setRegisterData({ ...registerData, role: e.target.value })}
        required
      >
        <option value="">Select Role</option>
        <option value="Student">Student</option>
        <option value="Instructor">Instructor</option>
        <option value="Exam Administrator">Exam Administrator</option>
      </select>
      <button type="submit">Register</button>
    </form>
    <p>Already have an account? <button onClick={() => setPage('login')}>Login</button></p>
  </div>
);

const MainPage = ({ currentUser, handleLogout }) => (
  <div className="main-container">
    <header>
      <div style={{display: 'flex', alignItems: 'center'}}>
        <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
        <h1>Welcome to EduConnect Learning Centre, {currentUser.name}!</h1>
      </div>
      <button onClick={handleLogout}>Logout</button>
    </header>
    <main>
      <section>
        <h2>Available Courses</h2>
        <ul>
          <li>Introduction to Programming</li>
          <li>Data Structures and Algorithms</li>
          <li>Web Development</li>
          <li>Machine Learning Basics</li>
        </ul>
      </section>
      <section>
        <h2>Your Progress</h2>
        <p>Track your learning progress here.</p>
      </section>
    </main>
  </div>
);

const HomePage = () => {
  const [page, setPage] = React.useState('login');
  const [users, setUsers] = React.useState([]);
  const [currentUser, setCurrentUser] = React.useState(null);
  const [loginData, setLoginData] = React.useState({ email: '', password: '' });
  const [registerData, setRegisterData] = React.useState({ name: '', email: '', password: '', role: '' });
  const [assessments, setAssessments] = React.useState([]);
  const [submissions, setSubmissions] = React.useState([]);
  const [questions, setQuestions] = React.useState([]);
  const [profileData, setProfileData] = React.useState({ name: '', email: '' });
  const [newAssessment, setNewAssessment] = React.useState({ title: '', description: '', course: '', deadline: '', gradingCriteria: '' });
  const [newQuestion, setNewQuestion] = React.useState({ assessmentId: '', question: '' });
  const [chatbotQuery, setChatbotQuery] = React.useState('');
  const [chatbotResponse, setChatbotResponse] = React.useState('');

  React.useEffect(() => {
    try {
      const storedUsers = JSON.parse(localStorage.getItem('users')) || [];
      setUsers(storedUsers);
      const storedUser = JSON.parse(localStorage.getItem('currentUser'));
      if (storedUser) {
        setCurrentUser(storedUser);
        setPage('home');
      }
      const storedAssessments = JSON.parse(localStorage.getItem('assessments')) || [];
      setAssessments(storedAssessments);
      const storedSubmissions = JSON.parse(localStorage.getItem('submissions')) || [];
      setSubmissions(storedSubmissions);
      const storedQuestions = JSON.parse(localStorage.getItem('questions')) || [];
      setQuestions(storedQuestions);
    } catch (error) {
      console.error('Error loading data from localStorage:', error);
      localStorage.removeItem('users');
      localStorage.removeItem('currentUser');
      localStorage.removeItem('assessments');
      localStorage.removeItem('submissions');
      localStorage.removeItem('questions');
    }
  }, []);

  const handleLogin = (e) => {
    e.preventDefault();
    const user = users.find(u => u.email === loginData.email && u.password === loginData.password && u.active !== false);
    if (user) {
      setCurrentUser(user);
      localStorage.setItem('currentUser', JSON.stringify(user));
      setPage('home');
    } else {
      alert('Invalid credentials or account deactivated');
    }
  };

  const handleRegister = (e) => {
    e.preventDefault();
    if (users.find(u => u.email === registerData.email)) {
      alert('User already exists');
      return;
    }
    const newUser = { ...registerData, id: Date.now(), active: true };
    const updatedUsers = [...users, newUser];
    setUsers(updatedUsers);
    localStorage.setItem('users', JSON.stringify(updatedUsers));
    setCurrentUser(newUser);
    localStorage.setItem('currentUser', JSON.stringify(newUser));
    setPage('home');
  };

  const handleLogout = () => {
    setCurrentUser(null);
    localStorage.removeItem('currentUser');
    setPage('login');
  };

  const updateProfile = (e) => {
    e.preventDefault();
    const updatedUser = { ...currentUser, name: profileData.name, email: profileData.email };
    const updatedUsers = users.map(u => u.id === currentUser.id ? updatedUser : u);
    setUsers(updatedUsers);
    setCurrentUser(updatedUser);
    localStorage.setItem('users', JSON.stringify(updatedUsers));
    localStorage.setItem('currentUser', JSON.stringify(updatedUser));
    alert('Profile updated');
  };

  const toggleUserActive = (userId) => {
    const updatedUsers = users.map(u => u.id === userId ? { ...u, active: !u.active } : u);
    setUsers(updatedUsers);
    localStorage.setItem('users', JSON.stringify(updatedUsers));
  };

  const createAssessment = (e) => {
    e.preventDefault();
    const assessment = { ...newAssessment, id: Date.now(), instructorId: currentUser.id, files: [] };
    const updatedAssessments = [...assessments, assessment];
    setAssessments(updatedAssessments);
    localStorage.setItem('assessments', JSON.stringify(updatedAssessments));
    setNewAssessment({ title: '', description: '', course: '', deadline: '', gradingCriteria: '' });
    alert('Assessment created');
  };

  const submitAssessment = (assessmentId, files) => {
    const submission = {
      id: Date.now(),
      assessmentId,
      studentId: currentUser.id,
      files,
      drafts: [{ version: 1, content: files, timestamp: new Date().toISOString() }],
      grade: null,
      feedback: '',
      status: 'submitted'
    };
    const updatedSubmissions = [...submissions, submission];
    setSubmissions(updatedSubmissions);
    localStorage.setItem('submissions', JSON.stringify(updatedSubmissions));
    alert('Submission successful');
  };

  const gradeSubmission = (submissionId, grade, feedback) => {
    const updatedSubmissions = submissions.map(s => s.id === submissionId ? { ...s, grade, feedback, status: 'graded' } : s);
    setSubmissions(updatedSubmissions);
    localStorage.setItem('submissions', JSON.stringify(updatedSubmissions));
  };

  const approveGrade = (submissionId) => {
    const updatedSubmissions = submissions.map(s => s.id === submissionId ? { ...s, status: 'approved' } : s);
    setSubmissions(updatedSubmissions);
    localStorage.setItem('submissions', JSON.stringify(updatedSubmissions));
  };

  const askQuestion = (e) => {
    e.preventDefault();
    const question = { ...newQuestion, id: Date.now(), studentId: currentUser.id, answers: [] };
    const updatedQuestions = [...questions, question];
    setQuestions(updatedQuestions);
    localStorage.setItem('questions', JSON.stringify(updatedQuestions));
    setNewQuestion({ assessmentId: '', question: '' });
  };

  const answerQuestion = (questionId, answer, official) => {
    const updatedQuestions = questions.map(q => q.id === questionId ? { ...q, answers: [...q.answers, { instructorId: currentUser.id, answer, official, resolved: false }] } : q);
    setQuestions(updatedQuestions);
    localStorage.setItem('questions', JSON.stringify(updatedQuestions));
  };

  const chatbotRespond = (query) => {
    // Simple chatbot based on Q&A
    const qa = [
      { q: 'What is the deadline?', a: 'Check the assessment details for the deadline.' },
      { q: 'How to submit?', a: 'Upload your files through the dashboard.' }
    ];
    const match = qa.find(item => query.toLowerCase().includes(item.q.toLowerCase()));
    return match ? match.a : 'I\'m sorry, I don\'t have information on that.';
  };

  const handleChatbot = (e) => {
    e.preventDefault();
    const response = chatbotRespond(chatbotQuery);
    setChatbotResponse(response);
  };

  const StudentDashboard = () => (
    <div className="main-container">
      <header>
        <div style={{display: 'flex', alignItems: 'center'}}>
          <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
          <h1>Welcome, {currentUser.name} (Student)</h1>
        </div>
        <div>
          <button onClick={() => setPage('profile')}>Profile</button>
          <button onClick={handleLogout}>Logout</button>
        </div>
      </header>
      <main>
        <section>
          <h3>My Assessments</h3>
          {assessments.map(a => (
            <div key={a.id} style={{border: '1px solid #ddd', padding: '10px', margin: '10px 0'}}>
              <h4>{a.title}</h4>
              <p>{a.description}</p>
              <p>Deadline: {a.deadline}</p>
              <button onClick={() => submitAssessment(a.id, 'file.pdf')}>Submit</button>
            </div>
          ))}
        </section>
        <section>
          <h3>Ask a Question</h3>
          <form onSubmit={askQuestion}>
            <select value={newQuestion.assessmentId} onChange={(e) => setNewQuestion({ ...newQuestion, assessmentId: e.target.value })}>
              <option value="">Select Assessment</option>
              {assessments.map(a => <option key={a.id} value={a.id}>{a.title}</option>)}
            </select>
            <textarea placeholder="Question" value={newQuestion.question} onChange={(e) => setNewQuestion({ ...newQuestion, question: e.target.value })} />
            <button type="submit">Ask</button>
          </form>
        </section>
        <section>
          <h3>Chatbot</h3>
          <form onSubmit={handleChatbot}>
            <input type="text" placeholder="Ask me anything" value={chatbotQuery} onChange={(e) => setChatbotQuery(e.target.value)} />
            <button type="submit">Ask</button>
          </form>
          <p>{chatbotResponse}</p>
        </section>
      </main>
    </div>
  );

  const InstructorDashboard = () => (
    <div className="main-container">
      <header>
        <div style={{display: 'flex', alignItems: 'center'}}>
          <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
          <h1>Welcome, {currentUser.name} (Instructor)</h1>
        </div>
        <div>
          <button onClick={() => setPage('profile')}>Profile</button>
          <button onClick={handleLogout}>Logout</button>
        </div>
      </header>
      <main>
        <section>
          <h3>Create Assessment</h3>
          <form onSubmit={createAssessment}>
            <input placeholder="Title" value={newAssessment.title} onChange={(e) => setNewAssessment({ ...newAssessment, title: e.target.value })} />
            <textarea placeholder="Description" value={newAssessment.description} onChange={(e) => setNewAssessment({ ...newAssessment, description: e.target.value })} />
            <input placeholder="Course" value={newAssessment.course} onChange={(e) => setNewAssessment({ ...newAssessment, course: e.target.value })} />
            <input type="datetime-local" value={newAssessment.deadline} onChange={(e) => setNewAssessment({ ...newAssessment, deadline: e.target.value })} />
            <textarea placeholder="Grading Criteria" value={newAssessment.gradingCriteria} onChange={(e) => setNewAssessment({ ...newAssessment, gradingCriteria: e.target.value })} />
            <button type="submit">Create</button>
          </form>
        </section>
        <section>
          <h3>Submissions</h3>
          {submissions.filter(s => assessments.find(a => a.id === s.assessmentId && a.instructorId === currentUser.id)).map(s => (
            <div key={s.id} style={{border: '1px solid #ddd', padding: '10px', margin: '10px 0'}}>
              <p>Student: {users.find(u => u.id === s.studentId)?.name}</p>
              <input type="number" placeholder="Grade" onChange={(e) => gradeSubmission(s.id, e.target.value, s.feedback)} />
              <textarea placeholder="Feedback" value={s.feedback} onChange={(e) => setSubmissions(submissions.map(sub => sub.id === s.id ? { ...sub, feedback: e.target.value } : sub))} />
            </div>
          ))}
        </section>
        <section>
          <h3>Questions</h3>
          {questions.map(q => (
            <div key={q.id} style={{border: '1px solid #ddd', padding: '10px', margin: '10px 0'}}>
              <p>{q.question}</p>
              <textarea placeholder="Answer" onChange={(e) => answerQuestion(q.id, e.target.value, true)} />
            </div>
          ))}
        </section>
      </main>
    </div>
  );

  const AdminDashboard = () => (
    <div className="main-container">
      <header>
        <div style={{display: 'flex', alignItems: 'center'}}>
          <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
          <h1>Welcome, {currentUser.name} (Admin)</h1>
        </div>
        <div>
          <button onClick={() => setPage('profile')}>Profile</button>
          <button onClick={handleLogout}>Logout</button>
        </div>
      </header>
      <main>
        <section>
          <h3>Manage Users</h3>
          {users.map(u => (
            <div key={u.id} style={{border: '1px solid #ddd', padding: '10px', margin: '10px 0'}}>
              <p>{u.name} - {u.role} - {u.active ? 'Active' : 'Inactive'}</p>
              <button onClick={() => toggleUserActive(u.id)}>{u.active ? 'Deactivate' : 'Activate'}</button>
            </div>
          ))}
        </section>
        <section>
          <h3>Approve Grades</h3>
          {submissions.filter(s => s.status === 'graded').map(s => (
            <div key={s.id} style={{border: '1px solid #ddd', padding: '10px', margin: '10px 0'}}>
              <p>Grade: {s.grade}</p>
              <button onClick={() => approveGrade(s.id)}>Approve</button>
            </div>
          ))}
        </section>
      </main>
    </div>
  );

  const ProfilePage = () => (
    <div className="main-container">
      <header>
        <div style={{display: 'flex', alignItems: 'center'}}>
          <img src="Images/Logo.png" alt="EduConnect Logo" className="logo" />
          <h1>Profile</h1>
        </div>
        <div>
          <button onClick={() => setPage('home')}>Back</button>
          <button onClick={handleLogout}>Logout</button>
        </div>
      </header>
      <main>
        <section>
          <h3>Update Profile</h3>
          <form onSubmit={updateProfile}>
            <input placeholder="Name" value={profileData.name || currentUser.name} onChange={(e) => setProfileData({ ...profileData, name: e.target.value })} />
            <input placeholder="Email" value={profileData.email || currentUser.email} onChange={(e) => setProfileData({ ...profileData, email: e.target.value })} />
            <button type="submit">Update</button>
          </form>
        </section>
      </main>
    </div>
  );

  if (page === 'login') return <LoginForm loginData={loginData} setLoginData={setLoginData} handleLogin={handleLogin} setPage={setPage} />;
  if (page === 'register') return <RegisterForm registerData={registerData} setRegisterData={setRegisterData} handleRegister={handleRegister} setPage={setPage} />;
  if (page === 'profile') return <ProfilePage />;
  if (page === 'home') {
    if (currentUser.role === 'Student') return <StudentDashboard />;
    if (currentUser.role === 'Instructor') return <InstructorDashboard />;
    if (currentUser.role === 'Exam Administrator') return <AdminDashboard />;
  }
};

function App() {
  return (
    <div className="App">
      <HomePage />
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>